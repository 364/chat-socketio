<!--
 * @Author: your name
 * @Date: 2020-03-11 14:00:03
 * @LastEditTime: 2020-03-11 21:26:34
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: \socket\view\signup.html
 -->
<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>登陆</title>
  <link type="text/css" rel="stylesheet" href="../stylesheets/sign.css">
  <link type="text/css" rel="stylesheet" href="../stylesheets/common.css">
</head>

<body>
  <div id="content">
    <form method="post" onsubmit="return ajax()" autocomplete="off">
      <div class="form_line">
        <div class="form_label">昵称：</div>
        <input type="text" name="name" autofocus />
      </div>
      <div class="form_line">
        <div class="form_label"></div>
        <button class="button" type="submit">登录</button>
        <button class="button cancel" type="reset">重置</button>
      </div>
    </form>
  </div>
  <script type="text/javascript" src="../javascripts/jquery.min.js"></script>
  <script>
    function ajax() {
      $.ajax({
        url: location.href,
        type: 'post',
        data: $("form").serialize(),
        success: function (data) {
          if (data.state) {
            location.reload()
            console.log('登录成功', location.host)
          } else {
            $("input[name='name']").val("")
            alert(data.msg)
          }
        }
      })
      return false
    }
    $(function () {
      $("button[type=reset]").click(function () {
        $("input").focus()
      })
    })
  </script>
</body>

</html>